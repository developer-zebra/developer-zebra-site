---
publish: true
title: Using Push-to-Talk
description: Enables Push-to-Talk functions on a Zebra device without unlocking it  
downloads:
  - title: UsingPTT.zip
    url: 'UsingPTT.zip'
features:
  - Java APIs
devices:
  - Supported on all Zebra Android devices
layout: sample.html
product: EMDK For Android
productversion: '7.6'
---

## Overview
This sample app demonstrates how the Push-to-Talk button on a Zebra device can be detected by Push-to-Talk applications to allow PTT functions to operate without unlocking the device. 

### Requirements
* A Zebra device running Android
* EMDK for Android 7.6 installed

####`DISCLAIMER:`
**Zebra does not recommend using this utility for production environments**. This app is an *<u>example</u>* of how to detect PTT buttons while the Android screen is locked. **No Zebra support or warranty is expressed or implied**.  

-----

### Remote Key Intents
In current versions of Android, only foreground apps are able to receive the events generated by the keyboards, GPIO keys, touch screen and other input devices (except HOME and BACK keys, etc.). Some of the enterprise features and apps developed for Zebra devices require certain key events to be notified even when they are running in the background. The Remote Key Event Service (RKES) service  facilitates such notifications and uses intents to alert apps to four preconfigured key events that cannot be changed.

#### Remote key intent format

**Intent Action**: Specifies the key event that generated the intent

**Intent extras**:
`Intent.EXTRA_KEY_EVENT`: Key event object 

Learn more [about key event objects](https://developer.android.com/reference/android/view/KeyEvent" https://developer.android.com/reference/android/view/KeyEvent)

Event objects are generated from the RKES using the following data:

#### Key Code

* **Action**: 0 = key down; 1 = key up
* **Down time**
* **Time of event**
* **Repeat count**

The intent format applies to all the intents broadcast by the RKES. The following section briefly describes each intent broadcast by the RKES. 

#### `com.symbol.button.L1`
Broadcast when a key event corresponding to the key code `KEYCODE_BUTTON_L1` (102) occurs.<br> 
**Reserved for scanning**.

#### `com.symbol.button.L2`
Broadcast when a key event corresponding to the key code `KEYCODE_BUTTON_L2` (104) occurs.<br>
**Used for Push-to-Talk**

#### `com.symbol.button.R1`
Broadcast when a key event corresponding to the key code `KEYCODE_BUTTON_R1` (103) occurs. <br> **Reserved for scanning**.

#### `com.symbol.button.R2`
Broadcast when a key event corresponding to the key `code KEYCODE_BUTTON_R2` (105) occurs.<br> 
**Used for headset button during Push-to-Talk sessions**

### Sample code
The snippet below shows the broadcast receiver object. Full source code is provided in the project file download. 

      :::Java
      //Broadcast Receiver object
      private static BroadcastReceiver keyReceivers = null;

      public void createButtonReceiver() {
         //Create intent filter with the required remote key event (intent) that
         //needs to be received/processed by the application
         final IntentFilter requestFilter = new IntentFilter();
         requestFilter.addAction(â€œcom.symbol.button.R2");
         if (keyReceivers != null) {
            getApplicationContext().unregisterReceiver(keyReceivers);
            keyReceivers = null;
         }
         if (keyReceivers == null) {
            //Create new broadcast receiver object and override onReceive method
            keyReceivers = new BroadcastReceiver() {
               @Override
               public synchronized void onReceive(Context context, final Intent intent) {
                  try {
                     if (intent == null || intent.getAction() == null)
                        return;
                     KeyEvent event = intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
                     if (event == null)
                        return;
                     keyAction = event.getAction();
                     if (event.getRepeatCount() != 0)
                        return;
                     String message = "Receiving key intent: " + intent.getAction() + " : "
                                      + (keyAction == KeyEvent.ACTION_DOWN ? "DOWN" : "UP");
                     Log.v(TAG, message);
                  } catch (Exception e) {
                     e.printStackTrace();
                  }
               }
            }
