---
title: Staging Service API
layout: guide.html
product: EMM Toolkit
productversion: '2.0'
---

# `DRAFT`

**_Information subject to change without notice_**. 

-----

## Overview

This document provides interface specifications for the cloud-based Staging Service API, part of the Zebra Enterprise Mobility Management Toolkit (EMMTK). These APIs are intended for use by Zebra's EMM partners to generate StageNow barcodes for enrolling devices in their EMM solutions. 

### Prerequisites

**The Staging Service API requires the following**: 

* **A computer running Windows 7** with StageNow 2.10.1 or higher
*  - or - 
* **A computer running Windows 10** with StageNow 3.0 or higher
* **An EMM server with internet connectivity** 

<!-- 
* **One or more supported Zebra devices**
* **A printer** for printing barcodes
 -->

<!-- 
**Interfaces are of two types**: 

* **[REST APIs](#rest)**: generating barcodes, error reporting and other functions
* **

Second, User interface which can be invoked from the EMM’sWeb user interface. When the UI is invoked, Zebra EMM toolkit will take control over the UI and take user through the steps to capture the information required before generating the barcode. In case of any failures during MDM enrollment, the toolkit can also be used upload the error file and get error message and some assistance if possible. 2. Enroll in MDM, direct barcode generation: This API interface can be used to generate StageNow barcode directly by providing the setting xml (which can be generated by using StageNow desktop tool)as input to the API
 -->


**_Information subject to change without notice_**. 
 
-----
<div id="rest"></div>

## REST APIs

-----

### Generate barcode
This API can be used to generate a StageNow barcode directly by providing the settings XML files as input to the API. Settings files are generated by the StageNow desktop tool. 

**URL**: `https://emmtk.zebra.com/v1/generate-barcode`

Note: For on-premise deployments, change `emmtk.zebra.com` in the URL above to match the host domain. 

**METHOD**: POST

The API should be called with HTTP request method `POST`. The parameters to be sent as part of body is specified in `Data Params` section.

**URL PARAMS**: NONE

**HTTP headers**: `Content-Type: application/x-www-form-urlencoded`

**DATA PARAMS**:

The body of the `http` request should contain the following data in JSON format:

* **ConfigData**: 
	* **settingxml**:Base64encoded xml string which is in accordance with the format specified byMx framework.
	* **mxVersion**: version of Mx for which the setting xml is targeted for.
* **BarcodeInfo**
	* **type**: List of string indicating type of barcode to be generated. Possible values are
		* `linear`
		* `pdf417`: If this parameter is not passed, `pdf417` will be assumed by default
	* **profileName**: This is a string which will be printed as meta info in the generated barcode page for reference. If this parameter is not passed, random name will be used as default Ex: `StageNow_profile31`
	* **brandingId**: This is an integer parameter and is optional. Reserved for future for identifying branding information to be included in the generated barcode.
	* **comments**: Any instructions that needs to be part of the document for the staging user.This is optional parameter. Comments section in the barcode page if this parameter is not provided

**Success Response**: Base64 encoded PDF file in binary format with http status code 200.

**Error Response**: Standard Http error codes will be used to indicate the error.Specific errors will be part of error message in JSON format. Example:

* Error code `400`: In case xml input is not found or if it is malformed.
* Error code `503`: If the service cannot be fulfilled due to overloading

**Sample request body**

	:::json
	{
		"configData":{
			"settingxml":"<wap-provisioningdoc><characteristicversion=\"4.5\"type=\"Wi-Fi\"><characteristictype=\"System\"><parmname=\"WiFiAction\"value=\"enable\"/></characteristic><parmname=\"UseRegulatory\"value=\"0\"/><parmname=\"UseDiagnosticOptions\"value=\"0\"/><parmname=\"UseAdvancedOptions\"value=\"0\"/></characteristic></wap-provisioningdoc>",
			"mxVersion":"6.2"
			},
		"barcodeInfo":{
			"type":["PDF417"],
			"profileName":
			"myStagingProfile",
			"brandingId":1,
			"comments":"Scanthebarcodepage1and2"
			}
	}

> Note: Notice how the quotes in the `settingxml` are escaped

### Error reporting
This interface can be used in case of a failure is seen after scanning the EMM's enrollment barcode using StageNow client on the device.  The interface provides a UI to upload the error file and get an error message. It also may provide some assistance in determining the changes required (if possible).

**URL**: `https://emmtk.zebra.com/v1/errorreport`

> Note: For on-premise deployments, `emmtk.zebra.com` should be changed to match your host domain name. 

**METHOD**: POST

The API should be called with HTTP request method `POST`. The parameters to be sent as part of body is specified in `URL Params` section.

**URL PARAMS**:

* **errorfile**: URL encoded error xml. If this parameter is not provided, the invoked EMMTKv3 UI will ask user to upload the error xml before showing the error message and suggestions. ex:
	* `%3Cwap-provisioningdoc%3E%0D%0A%3Ccharacteristic-error+type%3D%22AppMgr%22+version%3D%225.1%22+desc%3D%22missing%22%3E%0D%0A%3Cparm-error+name%3D%22Action%22+value%3D%22Install%22+desc%3D%22apk+doesnot+exist+in+the+path%22%2F%3E%0D%0A%3Cparm+name%3D%22APK%22+value%3D%22%2Fmnt%2Fsdcard%2FAKNotepad%22%2F%3E%0D%0A%3C%2Fcharacteristic-error%3E%0D%0A%3C%2Fwap-provisioningdoc%3E%0D%0A`
* **isLogFile**: `true|false` This is flag to indicate if the “errorfile” parameter contains error xml or it is error log filein which the error xmlis embedded.
* **settingxml**: URL encoded settingxml for which the error was seen. This is `optional` parameter. This will help the tool kit in determining the cause of the error more accurately.


**Success Response**: An error message along with a possible details will be rendered in the web page.

**Error Response**: A web page containing the error message and the possible cause of the error will be shown.

<!-- 
<div id="uiinterface"></div>
## UI Interface

The UI  interface which can be invoked from the EMM’s Web user interface. When the UI is invoked, Zebra EMM toolkit will take control over the UI and take the user through the steps to capture the information required before generating the barcode.

 -->

-----

### Pre-Requisites
In order to use this interface, the EMM should work with the Zebra technical team to come up with tailored UI flow (WDD) which is unique for each EMM provider. A unique id will be provided to EMMs for the generated flow(WDD) which can be passed as parameter to the interface.

### Generate barcode

**URL**: `https://emmtk.zebra.com/v1/enroll/{wizard_id}?mx-version=6.0`

> Note: The `wizard_id` should be replaced with the id provided by Zebra. For on-premise deployments, `emmtk.zebra.com` should be changed to match your host domain name. 


**METHOD**: GET

The API should be called with HTTP request method `GET`. 

**URL PARAMS**: 

* **wizard_id**: `Required` This the unique ID of the wizard shared with EMMs when WDD is developed by Zebra.
* **mxVersion**: version of Mx for which the setting xml is targeted for.

**Success Response**: A Barcode page will be rendered in the page from which this UI is invoked.

**Error Response**: Web page containing the error message and possible cause of the error will be shown. 


-----


## See Also

* [Other Guides](../)
