---
title: Staging Service APIs
layout: guide.html
product: EMM Toolkit
productversion: '2.0'
---

## `DRAFT`

**_Information subject to change without notice_**. 

-----

## Overview

This document provides interface specifications for the cloud-based Staging Service APIs, part of the Zebra Enterprise Mobility Management Toolkit (EMMTK). These APIs are intended for use by Zebra EMM vendors to generate StageNow barcodes for enrolling devices in an EMM solution. 

### Prerequisites

* **A computer running Windows 7** with StageNow 2.10.1 or higher
* **An EMM server with internet connectivity** 

> **Note: [StageNow 3.0](/stagenow) or higher is required** for computers running Windows 10. 

<!-- 
* **One or more supported Zebra devices**
* **A printer** for printing barcodes
 -->

<!-- 
**Interfaces are of two types**: 

* **[REST APIs](#rest)**: generating barcodes, error reporting and other functions
* **

Second, User interface which can be invoked from the EMM’sWeb user interface. When the UI is invoked, Zebra EMM toolkit will take control over the UI and take user through the steps to capture the information required before generating the barcode. In case of any failures during MDM enrollment, the toolkit can also be used upload the error file and get error message and some assistance if possible. 2. Enroll in MDM, direct barcode generation: This API interface can be used to generate StageNow barcode directly by providing the XML settings file (which can be generated by using StageNow desktop tool)as input to the API
 -->


**_Information subject to change without notice_**. 
 
-----
<div id="rest"></div>

## REST APIs

### Generate barcode
Use this API to generate a StageNow barcode directly by providing the XML-based settings files as input to the API. Settings files are generated by the StageNow desktop tool. 

**URL**: `https://emmtk.zebra.com/v1/generate-barcode`

Note: For on-premise deployments, change "`emmtk.zebra.com`" in the URL above to match the host domain in use. 

**METHOD**: POST

The API should be called with `HTTP` request method `POST`. The parameters to be sent as part of body is specified in `Data Params` section.

**URL PARAMS**: NONE

**HTTP headers**: `Content-Type: application/x-www-form-urlencoded`

**DATA PARAMS**:

The body of the `HTTP` request should contain the following data in JSON format:

* **ConfigData**: 
	* **settingxml**:Base64encoded XML string in accordance with the format specified by the MX framework.
	* **mxVersion**: version of MX for which the XML settings file is targeted.
* **BarcodeInfo**
	* **type**: List of string indicating type of barcode to be generated. Possible values:
		* `linear`
		* `pdf417`: If this parameter is not passed, `pdf417` is used
	* **profileName**: String printed as meta info in the generated barcode page for reference. If this parameter is not passed, a random name is used. For example: `StageNow_profile31`
	* **brandingId**: Optional integer parameter. Reserved for future use to identify branding information to be included in the generated barcode.
	* **comments**: optional string with instructions included in the document and displayed to the staging user. Comments section in the barcode page if this parameter is not provided.

**Success Response**: Base64 encoded PDF file in binary format with http status code 200.

**Error Response**: Standard Http error codes will be used to indicate the error.Specific errors will be part of error message in JSON format. Example:

* Error code `400`: In case xml input is not found or if it is malformed.
* Error code `503`: If the service cannot be fulfilled due to overloading

**Sample request body**

	:::json
	{
		"configData":{
			"settingXML":"<wap-provisioningdoc><characteristicversion=\"4.5\"type=\"Wi-Fi\"><characteristictype=\"System\"><parmname=\"WiFiAction\"value=\"enable\"/></characteristic><parmname=\"UseRegulatory\"value=\"0\"/><parmname=\"UseDiagnosticOptions\"value=\"0\"/><parmname=\"UseAdvancedOptions\"value=\"0\"/></characteristic></wap-provisioningdoc>",
			"mxVersion":"6.2"
			},
		"barcodeInfo":{
			"type":["PDF417"],
			"profileName":
			"myStagingProfile",
			"brandingId":1,
			"comments":"Scanthebarcodepage1and2"
			}
	}

> Note: Notice how the quotes in the `settingxml` are escaped

### Error reporting
This interface can be used in case of a failure is seen after scanning the EMM's enrollment barcode using StageNow client on the device.  The interface provides a UI to upload the error file and get an error message. It also may provide some assistance in determining the changes required (if possible).

**URL**: `https://emmtk.zebra.com/v1/errorreport`

> Note: For on-premise deployments, change "`emmtk.zebra.com`" to match the host domain name in use. 

**METHOD**: POST

The API should be called with HTTP request method `POST`. The parameters to be sent as part of body is specified in `URL Params` section.

**URL PARAMS**:

* **errorfile**: URL encoded error XML. If this parameter is not provided, the invoked EMMTKv3 UI will ask user to upload the error XML before showing the error message and suggestions. ex:
	* `%3Cwap-provisioningdoc%3E%0D%0A%3Ccharacteristic-error+type%3D%22AppMgr%22+version%3D%225.1%22+desc%3D%22missing%22%3E%0D%0A%3Cparm-error+name%3D%22Action%22+value%3D%22Install%22+desc%3D%22apk+doesnot+exist+in+the+path%22%2F%3E%0D%0A%3Cparm+name%3D%22APK%22+value%3D%22%2Fmnt%2Fsdcard%2FAKNotepad%22%2F%3E%0D%0A%3C%2Fcharacteristic-error%3E%0D%0A%3C%2Fwap-provisioningdoc%3E%0D%0A`
* **isLogFile**: `true|false` This is flag to indicate if the “errorfile” parameter contains error XML or it is error log file in which the error XML is embedded.
* **settingxml**: URL encoded XML settings file for which the error was seen. **This optional parameter** helps the toolkit determine the cause of the error most accurately.

**Success Response**: An error message along with a possible details is rendered in the web page.

**Error Response**: A web page containing the error message and the possible cause of the error is shown.

<!-- 
<div id="uiinterface"></div>
## UI Interface

The UI  interface which can be invoked from the EMM’s Web user interface. When the UI is invoked, Zebra EMM toolkit will take control over the UI and take the user through the steps to capture the information required before generating the barcode.

 -->

-----

### Pre-Requisites
To use this interface, the EMM should work with the Zebra technical team to come up with tailored UI flow (WDD), which is unique to each EMM vendor. A unique ID is provided to EMMs for the generated flow (WDD), which is passed as a parameter to the interface.

### Generate barcode

**URL**: `https://emmtk.zebra.com/v1/enroll/{wizard_id}?mx-version=6.0`

> Note: Replace the `wizard_id` with the ID provided by Zebra. For on-premise deployments, change `emmtk.zebra.com` to match the host domain name in use. 

**METHOD**: GET

The API should be called with HTTP request method `GET`. 

**URL PARAMS**: 

* **wizard_id**: `Required` This the unique ID of the wizard shared with EMMs when WDD is developed by Zebra.
* **mxVersion**: version of Mx for which the XML settings file is targeted.

**Success Response**: A Barcode page will be rendered in the page from which this UI is invoked.

**Error Response**: Web page containing the error message and possible cause of the error will be shown. 


-----


## See Also

* [Other Guides](../)
